# MATLAB Optimizition Toolbox                     (优化工具箱)

## 优化工具箱简介

MATLAB 优化工具箱是一个专门的附加组件，提供了一系列强大的优化算法和函数，用于解决各种复杂的优化问题。这个工具箱不是 MATLAB 基础版本的一部分，而是需要单独安装和许可的附加模块。

其主要优化类别如下：

1. 线性规划 (LP)
2. 二次规划 (QP)
3. 非线性优化
4. 多目标优化
5. 全局优化

使用时，您可以：

- 直接调用工具箱中的函数名称（如 `linprog`、`quadprog`、`fmincon` 等）
- 或使用函数句柄来引用它们

## 线性规划 (LP)

### **函数：`linprog`**

**数学模型：**
$$
\begin{align*}
\min & \quad f^{T}X \\
\text{s.t.} & \quad AX \leq b \\
& \quad AeqX = beq \\
& \quad lb \leq X \leq ub
\end{align*}
$$

**解释：**

- **用途：** 解决线性规划问题。
- **参数：**
  - `f`：目标函数的系数向量。
  - `A`, `b`：定义不等式约束的矩阵。
  - `Aeq`, `beq`：定义等式约束的矩阵。
  - `lb`, `ub`：变量的下界和上界。
- **返回值：** 最优解向量 `X`，`X` 处的目标函数值，退出标志，输出结构体，以及拉格朗日乘子。

**代码示例：**
```matlab
f = [-1; -2]; % 目标函数系数
A = [1, 1; -1, 2; 2, 1]; % 不等式约束矩阵
b = [2; 2; 3]; % 不等式约束向量
Aeq = []; % 等式约束矩阵
beq = []; % 等式约束向量
lb = [0; 0]; % 变量下界
ub = []; % 变量上界

[X, fval] = linprog(f, A, b, Aeq, beq, lb, ub);
disp('最优解：');
disp(X);
disp('目标函数值：');
disp(fval);
```

### **函数：`intlinprog`**

**解释：**
- **用途：** 解决混合整数线性规划问题。
- **参数：** 与 `linprog` 类似，但需额外指定整数约束。
- **返回值：** 与 `linprog` 相同。

**代码示例：**
```matlab
f = [-1; -2]; % 目标函数系数
intcon = [1, 2]; % 整数约束
A = [1, 1; -1, 2; 2, 1]; % 不等式约束矩阵
b = [2; 2; 3]; % 不等式约束向量
Aeq = []; % 等式约束矩阵
beq = []; % 等式约束向量
lb = [0; 0]; % 变量下界
ub = []; % 变量上界

[X, fval] = intlinprog(f, intcon, A, b, Aeq, beq, lb, ub);
disp('最优解：');
disp(X);
disp('目标函数值：');
disp(fval);
```

## 二次规划 (QP)

### **函数：`quadprog`**

**数学模型：**
$$
\min \quad \frac{1}{2}X^T H X + C^T X
$$
$$
\text{s.t.} \quad AX \leq b
$$
$$
AeqX = beq
$$
$$
lb \leq X \leq ub
$$

**解释：**
- **用途：** 解决二次规划问题。
- **参数：**
  - `H`：二次项的对称矩阵。
  - `C`：线性项的系数向量。
  - `A`, `b`, `Aeq`, `beq`, `lb`, `ub`：约束条件，与 `linprog` 中相同。
- **返回值：** 最优解向量 `X`，`X` 处的目标函数值，退出标志，输出结构体，以及拉格朗日乘子。

**代码示例：**
```matlab
H = [1, 0; 0, 1]; % 二次项系数矩阵
C = [-1; -2]; % 线性项系数向量
A = [1, 1; -1, 2; 2, 1]; % 不等式约束矩阵
b = [2; 2; 3]; % 不等式约束向量
Aeq = []; % 等式约束矩阵
beq = []; % 等式约束向量
lb = [0; 0]; % 变量下界
ub = []; % 变量上界

[X, fval] = quadprog(H, C, A, b, Aeq, beq, lb, ub);
disp('最优解：');
disp(X);
disp('目标函数值：');
disp(fval);
```

## 一般非线性优化

### 函数：`fminbnd`

**用途：** 在给定区间内寻找单变量函数的最小值。

**参数：**
- `fun`：要最小化的函数句柄
- `x1`：搜索区间的下界
- `x2`：搜索区间的上界
- `options`：（可选）优化选项结构体

**返回值：**
- `x`：函数最小值点
- `fval`：函数在 x 处的最小值
- `exitflag`：退出标志，表示算法的终止条件
- `output`：包含优化信息的结构体

**代码示例：**
```matlab
f = @(x) (x-2)^2 + 1; % 目标函数
lb = 0; % 下界
ub = 4; % 上界

[x, fval] = fminbnd(f, lb, ub);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

### 函数：`fminunc`

**用途：** 寻找多变量无约束非线性函数的最小值。

**参数：**
- `fun`：要最小化的函数句柄
- `x0`：初始点
- `options`：（可选）优化选项结构体

**返回值：**
- `x`：局部最优解
- `fval`：函数在 x 处的最小值
- `exitflag`：退出标志，表示算法的终止条件
- `output`：包含优化信息的结构体
- `grad`：（可选）在解处的梯度
- `hessian`：（可选）在解处的 Hessian 矩阵

**代码示例：**
```matlab
f = @(x) (x(1)-2)^2 + (x(2)-3)^2; % 目标函数
x0 = [0, 0]; % 初始点

[x, fval] = fminunc(f, x0);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

### 函数：`fminsearch`

**用途：** 使用 Nelder-Mead 单纯形法寻找多变量无约束非线性函数的最小值。

**参数：**
- `fun`：要最小化的函数句柄
- `x0`：初始点
- `options`：（可选）优化选项结构体

**返回值：**
- `x`：局部最优解
- `fval`：函数在 x 处的最小值
- `exitflag`：退出标志，表示算法的终止条件
- `output`：包含优化信息的结构体

**代码示例：**

```matlab
f = @(x) (x(1)-2)^2 + (x(2)-3)^2; % 目标函数
x0 = [0, 0]; % 初始点

[x, fval] = fminsearch(f, x0);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

这些函数提供了不同的方法来解决非线性优化问题：
- `fminbnd` 适用于单变量有界优化问题。
- `fminunc` 适用于多变量无约束优化问题，可以利用梯度信息。
- `fminsearch` 适用于多变量无约束优化问题，不需要梯度信息，但可能在高维问题上收敛较慢。

## 多目标优化

### **函数：`fgoalattain`**

**数学模型：**
$$
\min \quad w\left(f(x) - goal\right)
$$

**解释：**

- **用途：** 解决多目标优化问题。
- **参数：**
  - `fun`：目标函数句柄。
  - `x0`：初始点。
  - `goal`：目标值向量。
  - `weight`：权重向量，用于调整各个目标的重要性。
  - `A`, `b`, `Aeq`, `beq`, `lb`, `ub`：约束条件。
- **返回值：** 最优解向量 `x`，`x` 处的目标函数值 `fval`，退出标志 `exitflag`，输出结构体 `output`。

**代码示例：**

```matlab
fun = @(x) [x(1)^2 + x(2)^2; (x(1)-1)^2 + (x(2)-1)^2]; % 目标函数
x0 = [0.5, 0.5]; % 初始点
goal = [0, 0]; % 目标值
weight = [1, 1]; % 权重

[x, fval] = fgoalattain(fun, x0, goal, weight);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

### **函数：`paretosearch`**

**解释：**

- **用途：** 解决多目标优化问题，寻找帕累托前沿。
- **参数：**
  - `fun`：目标函数句柄。
  - `nvars`：决策变量的数量。
  - `A`, `b`, `Aeq`, `beq`, `lb`, `ub`：约束条件。
- **返回值：** 帕累托前沿解 `x`，对应的目标函数值 `fval`，退出标志 `exitflag`，输出结构体 `output`。

**代码示例：**

```matlab
fun = @(x) [x(1)^2 + x(2)^2; (x(1)-1)^2 + (x(2)-1)^2]; % 目标函数
nvars = 2; % 决策变量数量
lb = [0, 0]; % 变量下界
ub = [1, 1]; % 变量上界

[x, fval] = paretosearch(fun, nvars, [], [], [], [], lb, ub);
disp('帕累托前沿解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

## 全局优化

### **函数：`ga`**

**解释：**

- **用途：** 使用遗传算法解决全局优化问题。
- **参数：**
  - `fun`：目标函数句柄。
  - `nvars`：决策变量的数量。
  - `A`, `b`, `Aeq`, `beq`, `lb`, `ub`：约束条件。
- **返回值：** 全局最优解 `x`，`x` 处的目标函数值 `fval`，退出标志 `exitflag`，输出结构体 `output`。

**代码示例：**

```matlab
fun = @(x) (x(1)-2)^2 + (x(2)-3)^2; % 目标函数
nvars = 2; % 决策变量数量
lb = [0, 0]; % 变量下界
ub = [5, 5]; % 变量上界

[x, fval] = ga(fun, nvars, [], [], [], [], lb, ub);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

### **函数：`simulannealbnd`**

**解释：**

- **用途：** 使用模拟退火算法解决全局优化问题。
- **参数：**
  - `fun`：目标函数句柄。
  - `x0`：初始点。
  - `lb`, `ub`：变量的下界和上界。
  - `options`：（可选）优化选项结构体。
- **返回值：** 全局最优解 `x`，`x` 处的目标函数值 `fval`，退出标志 `exitflag`，输出结构体 `output`。

**代码示例：**

```matlab
fun = @(x) (x-2)^2 + 1; % 目标函数
x0 = 0; % 初始点
lb = -5; % 下界
ub = 5; % 上界

[x, fval] = simulannealbnd(fun, x0, lb, ub);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```

### **函数：`particleswarm`**

**解释：**

- **用途：** 使用粒子群优化算法解决全局优化问题。
- **参数：**
  - `fun`：目标函数句柄。
  - `nvars`：决策变量的数量。
  - `lb`, `ub`：变量的下界和上界。
  - `options`：（可选）优化选项结构体。
- **返回值：** 全局最优解 `x`，`x` 处的目标函数值 `fval`，退出标志 `exitflag`，输出结构体 `output`。

**代码示例：**

```matlab
fun = @(x) (x(1)-2)^2 + (x(2)-3)^2; % 目标函数
nvars = 2; % 决策变量数量
lb = [0, 0]; % 变量下界
ub = [5, 5]; % 变量上界

[x, fval] = particleswarm(fun, nvars, lb, ub);
disp('最优解：');
disp(x);
disp('目标函数值：');
disp(fval);
```
